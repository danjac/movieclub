{% extends "base.html" %}
{% load heroicons %}
{% block content %}
    {% with release=review.release reviewer=review.user %}
        <nav class="pb-6 mb-6 border-b">
            <ul class="flex-wrap items-center space-y-3 font-semibold sm:flex sm:space-y-0 sm:space-x-3">
                <li class="flex items-center space-x-3">
                    {% if release.is_tv_show %}
                        <a class="inline-block link" href="{% url 'releases:tv_show_list' %}">TV Shows</a>
                    {% else %}
                        <a class="inline-block link" href="{% url 'releases:movie_list' %}">Movies</a>
                    {% endif %}
                    <span class="hidden sm:inline-block">{% heroicon_solid "chevron-right" %}</span>
                </li>
                <li class="flex items-center space-x-3">
                    <a class="link" href="{{ release.get_absolute_url }}">{{ release.title }}</a>
                    <span class="hidden sm:inline-block">{% heroicon_solid "chevron-right" %}</span>
                </li>
                <li class="flex items-center space-x-3">
                    <a class="link"
                       href="{% url 'reviews:release_review_list' release.pk %}">Reviews</a>
                    <span class="hidden sm:inline-block">{% heroicon_solid "chevron-right" %}</span>
                </li>
                <li class="hidden sm:inline-block">{{ reviewer.username }}</li>
            </ul>
        </nav>
        <div class="space-y-6">
            <div class="justify-between items-center space-y-6 sm:flex sm:space-y-0">
                <div>
                    Reviewed by <a class="link" href="{{ reviewer.get_absolute_url }}">{{ reviewer.username }}</a>
                    on <span class="font-semibold">{{ review.created|date }}</span>
                </div>
                <div class="flex items-center space-x-3 text-yellow-500">
                    {% for value in review.get_score_values %}
                        {% if value %}
                            {% heroicon_solid "star" %}
                        {% else %}
                            {% heroicon_outline "star" %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <p class="mb-6 break-words prose prose-sm md:prose-base dark:prose-invert">{{ review.comment|linebreaksbr }}</p>
            {% if request.user == reviewer %}
                <div class="flex items-center space-x-3">
                    <a href="{% url 'reviews:edit_review' review.pk %}" class="block link">Edit</a>
                    <button hx-delete="{% url 'reviews:delete_review' review.pk %}"
                            hx-confirm="Are you sure you want to delete this review?"
                            class="block link">Delete</button>
                </div>
            {% endif %}
        </div>
    {% endwith %}
{% endblock content %}
